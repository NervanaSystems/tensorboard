# Custom Plugin Development

## How to Launch
To launch this plugin, run commands below to generate demo data and launch Tensorboard:

    bazel run //tensorboard/plugins/custom:custom_demo
    bazel run tensorboard -- --logdir=/tmp/custom_demo

The plugin content is similar to [tensorboard-plugin-example](https://github.com/tensorflow/tensorboard-plugin-example "tensorboard-plugin-example"), so that it is easier to compare two approaches of making custom plugin.

## How to Develop
1. Create a folder under **tensorboard/plugins**, e.g. this plugin is located at tensorboard/plugins/custom, with an empty **\_\_init\_\_.py**.
2. Add **&lt;PLUGIN_NAME&gt;_plugin.py**, it defines routes/API endpoints and activity status of your plugin. If you are not able to launch new plugin for some reason, it is possible that you didn't properly define active conditions with is_active function.
3. Add **summary.py**, you will need to import this file to write summary. Some plugins only recognize data that is generated by its summary writer. If you want to launch other plugins along with this plugin, e.g. scalar, you can use `from tensorboard.plugins.scalar import scalar_summary` or `from tensorboard import summary as summary_lib` to import scalar summary writer and add scalar data.
4. Add **&lt;PLUGIN_NAME&gt;_demo.py** for generating demo data. Many plugins have demo files, so people can run `bazel run //tensorboard/plugins/<PLUGIN_NAME>:<PLUGIN_NAME>_demo` to generate data and play with the plugin.
5. Add **metadata.py** and plugin_data.proto for storing your metadata and data protobuf schema. Some plugins don't have them. I think it's more like best practice, they make the code look cleaner, but they are optional.
6. Add a folder **tf_&lt;PLUGIN_NAME&gt;_dashboard** for frontend. The framework is Polymer. Usually you need to add **index.html**, **tf_&lt;PLUGIN_NAME&gt;_dashboard.html** and other custom HTMLs if necessary. These HTMLs control the layout of custom plugin, and you can call API endpoints (defined in **&lt;PLUGIN_NAME&gt;_plugin.py**) to fetch backend data.
7. Add two bazel **BUILD** files, one for backend and one for frontend. This will copy and compile the files to destination folder. If you have problems importing any files, it is possible that you forgot to specify dependencies so Tensorboard can't find the files in dist folder. Take a look at the /bazel-out folder if necessary, that is where they dump the static files.
8. Register new plugin. Update these files so Tensorboard knows you have a new plugin:
    - tensorboard/BUILD
    - tensorboard/components/tf_tensorboard/BUILD
    - tensorboard/components/tf_tensorboard/default-plugins.html
    - tensorboard/default.py
    - tensorboard/summary.py
    - tensorboard/summary_test.py  
Just simply repeat what they have done for other plugins.
9. Launch Tensorboard with `bazel run tensorboard -- --logdir=<LOG_DIR>`. Make sure to relaunch Tensorboard if you have new log data, because sometimes it only reads data when it gets launched, not when you refresh the page.
10. Add any test files if necessary. Run tests with:
    - Backend unit test: `bazel test tensorboard/...`
    - Selenium integration test: `bazel test //tensorboard/functionaltests:core_test`
    - Frontend unit test: `bazel run //tensorboard/plugins/<PLUGIN_NAME>/<PATH_TO_TEST_FOLDER>/test`